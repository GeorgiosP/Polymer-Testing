<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html" />
<link rel="import" href="../bower_components/mercury-paginator/mercury-paginator.html">
<dom-module id="get-data">
    <template>
        <style>
             :host {
                display: block;
                padding: 10px;
            }
        </style>
        <!--<iron-ajax
      auto
      url="https://jsonplaceholder.typicode.com/users"
      handle-as="json"
      last-response="{{data}}">
    </iron-ajax>-->
        <template is="dom-bind">

            
            <mercury-paginator perpage="5" items="{{data}}"></mercury-paginator>
            <!-- Your structure data here -->
            <div class="div-table">
                <div class="head-row">
                    <div class="div-cell">Id</div>
                    <div class="div-cell">Item name</div>
                    <div class="div-cell">Email</div>
                </div>
                <template id="items" is="dom-repeat" items="{{data}}">
                    <div class="div-row">
                        <div class="div-cell">{{item.id}}</div>
                        <div class="div-cell">{{item.name}}</div>
                        <div class="div-cell">{{item.email}}</div>
                    </div>
                </template>
            </div>
        </template>
    </template>
    <script src="../bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <script>
        Polymer({
            is: 'get-data',

            properties: {
                data: {
                    type: Object,
                    notify: true,
                    value: function(){
                        _fetchJSONFile('https://jsonplaceholder.typicode.com/users', function (data) {
                            // do something with the data here 
                            this.data = data;
                        })
                    }
                        
                    },
          
                    _fetchJSONFile: function (path, callback) {
                        var httpRequest = new XMLHttpRequest();
                        httpRequest.onreadystatechange = function () {
                            if (httpRequest.readyState === 4) {
                                if (httpRequest.status === 200) {
                                    var data = JSON.parse(httpRequest.responseText);
                                    if (callback) callback(data);
                                }
                            }
                        };
                        httpRequest.open('GET', path);
                        httpRequest.send();
                    }

            }
        });
    </script>
</dom-module>